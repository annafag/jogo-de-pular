const player = document.getElementById("player");
const obstacle = document.getElementById("obstacle");
const gameArea = document.getElementById("gameArea");
const scoreElement = document.getElementById("score");

let isJumping = false;
let gravity = 0.9;
let jumpHeight = 15;
let obstacleSpeed = 5;
let score = 0;

function jump() {
    if (isJumping) return;

    isJumping = true;
    let jumpHeightCurrent = 0;
    let jumpInterval = setInterval(() => {
        if (jumpHeightCurrent < 150) {
            player.style.bottom = parseInt(player.style.bottom) + 5 + 'px';
            jumpHeightCurrent += 5;
        } else {
            clearInterval(jumpInterval);
            let fallInterval = setInterval(() => {
                if (parseInt(player.style.bottom) > 0) {
                    player.style.bottom = parseInt(player.style.bottom) - 5 + 'px';
                } else {
                    clearInterval(fallInterval);
                    isJumping = false;
                }
            }, 20);
        }
    }, 20);
}

function moveObstacle() {
    let obstaclePosition = parseInt(obstacle.style.right);

    if (obstaclePosition > gameArea.clientWidth) {
        // Reseta o obstáculo e aumenta a pontuação
        obstacle.style.right = '-30px';
        score++;
        scoreElement.textContent = score;
    } else {
        obstacle.style.right = obstaclePosition + obstacleSpeed + 'px';
    }

    if (obstaclePosition > 50 && obstaclePosition < 90 && parseInt(player.style.bottom) < 40) {
        // Colisão detectada
        clearInterval(obstacleInterval);
        alert("Game Over! Sua pontuação foi: " + score);
        location.reload(); // Reinicia o jogo
    }
}

function increaseDifficulty() {
    if (score % 5 === 0) {
        obstacleSpeed += 1;  // Aumenta a velocidade a cada 5 pontos
    }
}

let obstacleInterval = setInterval(moveObstacle, 20);

setInterval(increaseDifficulty, 1000);

document.addEventListener("keydown", function (e) {
    if (e.key === " " || e.key === "Spacebar") {
        jump();
    }
});

player.style.bottom = '0px';
obstacle.style.right = '-30px';
