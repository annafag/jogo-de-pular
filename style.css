// Variáveis do jogo
const player = document.getElementById("player");
const obstacle = document.getElementById("obstacle");
const gameArea = document.getElementById("gameArea");
const scoreElement = document.getElementById("score");

let isJumping = false;
let gravity = 0.9;
let jumpHeight = 15;
let obstacleSpeed = 5;
let score = 0;
let gameInterval;
let obstacleInterval;

// Função para pular
function jump() {
    if (isJumping) return;

    isJumping = true;
    player.style.transition = 'bottom 0.2s ease-out';
    let jumpUpInterval = setInterval(() => {
        if (parseInt(player.style.bottom) < 150) {
            clearInterval(jumpUpInterval);
            let fallInterval = setInterval(() => {
                if (parseInt(player.style.bottom) > 0) {
                    player.style.bottom = parseInt(player.style.bottom) - 5 + 'px';
                } else {
                    clearInterval(fallInterval);
                    isJumping = false;
                }
            }, 20);
        } else {
            player.style.bottom = parseInt(player.style.bottom) + 5 + 'px';
        }
    }, 20);
}

// Função para mover o obstáculo
function moveObstacle() {
    let obstaclePosition = parseInt(obstacle.style.right);

    if (obstaclePosition > gameArea.clientWidth) {
        // Reseta o obstáculo e aumenta a pontuação
        obstacle.style.right = '-30px';
        score++;
        scoreElement.textContent = score;
    } else {
        obstacle.style.right = obstaclePosition + obstacleSpeed + 'px';
    }

    // Verificar colisão
    if (obstaclePosition > 50 && obstaclePosition < 90 && parseInt(player.style.bottom) < 40) {
        // Colisão detectada
        clearInterval(gameInterval);
        clearInterval(obstacleInterval);
        alert("Game Over! Sua pontuação foi: " + score);
        location.reload(); // Reinicia o jogo
    }
}

// Função para aumentar a velocidade do obstáculo
function increaseDifficulty() {
    if (score % 5 === 0) {
        obstacleSpeed += 1;  // Aumenta a velocidade a cada 5 pontos
    }
}

// Inicia o movimento do obstáculo a cada intervalo
obstacleInterval = setInterval(moveObstacle, 20);

// Aumenta a dificuldade a cada intervalo
gameInterval = setInterval(increaseDifficulty, 1000);

// Detecta quando a tecla de espaço é pressionada
document.addEventListener("keydown", function (e) {
    if (e.key === " " || e.key === "Spacebar") {
        jump();
    }
});

// Configura o estilo inicial do player e do obstáculo
player.style.bottom = '0px';
obstacle.style.right = '-30px';